# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

OpticWorks Intranet - Internal documentation and resources site for OpticWorks team members. Built with Astro and Starlight, providing centralized access to employee handbooks, IT resources, development guides, and company policies.

## Commands

Development server (runs on `localhost:4321`):
```bash
npm run dev
```

Production build:
```bash
npm run build
```

Preview production build:
```bash
npm run preview
```

Astro CLI commands:
```bash
npm run astro ...
```

## Architecture

### Tech Stack
- **Framework**: Astro 5.6+ with Starlight integration
- **Language**: TypeScript with strict mode
- **Content**: Markdown/MDX files in `src/content/docs/`

### Project Structure
- `src/content/docs/` - All documentation pages (`.md` or `.mdx` files)
- `src/assets/` - Images and media (reference with relative links in Markdown)
- Default Starlight theme (no custom CSS overrides)
- `public/` - Static assets (favicons, etc.)
- `astro.config.mjs` - Astro configuration with Starlight setup
- `src/content.config.ts` - Content collections configuration using Starlight's docsLoader and docsSchema

### Starlight Configuration
The sidebar navigation is manually configured in `astro.config.mjs` with the following sections:
- Getting Started (Welcome, New Employee Onboarding)
- Employee Handbook (Company Culture, Benefits & Perks, Time Off Policy)
- IT Resources (Software & Tools, Security Guidelines, Support Tickets)
- Development (Development Setup, Code Standards, Git Workflow)
- Policies (autogenerated from `policies/` directory)

### Branding
Styling uses the default Starlight theme for consistent, accessible UI.

### Routing
Files in `src/content/docs/` are automatically exposed as routes based on their file name. For example:
- `src/content/docs/index.mdx` → `/`
- `src/content/docs/handbook/culture.md` → `/handbook/culture`

## Deployment

The site is deployed to Cloudflare Pages via GitHub Actions.

### Initial Deployment Setup

Cloudflare Pages project: `opticworks-intranet`
- Build command: `npm run build`
- Output directory: `dist`

### Deploy Updates

Build and deploy through GitHub Actions:
```bash
git add .
git commit -m "Update docs"
git push origin main
```

### Access URL

The site is accessible at:
- **Primary URL**: `https://intranet.optic.works`

Cloudflare Access enforces authentication for @optic.works users.
